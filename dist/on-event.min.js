/* Copyright 2023 Carlos A. (https://github.com/dealfonso); License: https://opensource.org/license/mit/ */
(function(window,document,$){"use strict";function init(el){let handlers={};let nameMap={};for(let attr of el.attributes){if(attr.name.startsWith("on-")){if(attr.name.endsWith(":map")){let event=attr.name.substring(3,attr.name.length-4);let map=attr.value;nameMap[event]=map}else{let event=attr.name.substring(3);handlers[event]=function(e){return eval(attr.value)}}}}el.onEvent={_handlers:handlers,_map:nameMap,_eventName:function(e){if(this.onEvent._map[e]!==undefined){return this.onEvent._map[e]}return e}.bind(el),deactivate:function(e=null){if(e!==null){if(this._handlers[e]!==undefined){el.removeEventListener(this._eventName(e),this._handlers[e])}}else{let n=this._eventName;Object.keys(handlers).forEach(function(e){el.removeEventListener(n(e),handlers[e])})}},activate:function(e=null){if(e!==null){if(this.handlers[e]!==undefined){el.addEventListener(this._eventName(e),handlers[e])}}else{let n=this._eventName;Object.keys(handlers).forEach(function(e){el.addEventListener(n(e),handlers[e])})}}};el.onEvent.activate()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("*").forEach(function(e){init(e)})})}if(window.$!==undefined){$.fn.onEvent=function(e,n=null){this.each(function(){if(this.onEvent===undefined){init(this)}if(typeof e==="string"){switch(e){case"deactivate":this.onEvent.deactivate(n);break;case"activate":this.onEvent.activate(n);break;default:console.error("Unknown action: "+e);break}}});return this}}window.onEvent=init;window.onEvent.version="0.1.0"})(window,document,window.$);
